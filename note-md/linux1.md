# 初识linux



## Linux内核

linux系统的组成如下：

- Linux系统内核
- 系统级应用程序



- 内核提供系统最核心的功能，如：调度CPU、调度内存、调度文件系统、调度网络通讯、调度IO等。
- 系统级应用程序，可以理解为出厂自带程序，可供用户快速上手操作系统，如：文件管理器、任务管理器、图片查看、音乐播放

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 134435.png" alt="屏幕截图 2025-03-15 134435" style="zoom:75%;" />



# 虚拟机

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 135244.png" alt="屏幕截图 2025-03-15 135244" style="zoom: 67%;" />

通过快照可以实现虚拟机状态回滚。



# Linux基础命令

## Linux的目录结构

Linux的目录结构是一个属性结构。Linux没有盘符的概念，只有一个根目录**/** ，所有文件都在它下面。

在windows系统中，路径之间的层级关系用\表示，而在Linux中，路径之间的层级关系用**/**来表示





## Linux命令入门

### Linux命令基础

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 163307.png" alt="屏幕截图 2025-03-15 163307" style="zoom: 50%;" />



### ls命令入门

直接输入ls命令，表示列出当前工作目录(默认HOME目录)下的内容。

HOME目录：操作系统允许有多用户。每个Linux操作用户在Linux系统的个人账户目录，路径在`/home/用户名`



ls命令格式：`ls [-a -l -h] [Linux路径]`   ，中括号表示可选

- -a : 表示列出所有文件（包括隐藏的文件），而在Linux中，以 . 开头的是隐藏文件

- -l ：表示以列表（竖向）的形式展示内容，并展现更多信息

- -a/-al/-la :这三种都表示以列表形式展示所有文件

- -h：必须和-l 一起使用，用来更细致的展现文件的大小

命令是可以组合使用的，比如`ls -lah`，等同于`ls -a -l -h`



## 目录切换相关命令

通过cd更改当前工作目录，不写路径表示回到home目录



pwd命令查看当前所在工作目录。 (print work directory)



## 路径相关

绝对路径：以**根目录为起点**，描述路径的一种写法,路径描述以/开头

相对路径：以**当前目录为起点**，路径描述不需要/开头



特殊表示：

-  `.`  :表示当前目录
- `..`  : 表示上一级目录，`cd ../..`可返回上两级目录
- `~`：HOME目录



## 创建目录

`mkdir [-p] Linux路径`

mkdir :  make directory

- 参数必填
- -p可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录



## 文件操作命令

`touch Linux路径` 创建文件

`cat Linux路径` 查看文件内容，全部显示

`more Linux路径` 查看文件内容，支持翻页。空格翻页，q退出查看



`cp [-r] 参数1 参数2`：

- -r : 用于复制文件夹使用，表示递归
- 参数一：被复制
- 参数二：复制目的地

`mv 参数1 参数2`：移动文件/文件夹。在将文件（夹）移动至文件（夹）时，如果目标文件不存在，自身进行改名后移动



`rm [-r -f] 参数1 ...参数n`：

- -r用于删除文件夹

- -f表示force，强制删除（不会提示确认信息）

  普通用户删除不会弹出提示，root会提示，所以一般用户用不到-f

  - 补充：用su -root切换root，用exit退出

- 参数用空格隔开

- rm 命令支持通配符:
  - test*表示任何以test开头的内容
  - *test以test结尾
  - `*test*`包含test



## 查找命令

`which 要查找的命令 ` 命令其实是一个个可执行的程序，相当于exe。which只能查找命令的位置

`find 起始路径 -name "被查找的文件名"` 搜索指定文件。find也可以使用通配符

`find 起始路径 -size [+ -]n[单位] ` 按文件大小查找（+ -表示大于小于）。n表示大小数字。单位有k、M、G



## grep、wc、管道符

`grep [-n] 关键字 文件路径`:从文件中通过关键字过滤文件行

- -n表示在结果中显示匹配的行的的行号
- 如果关键字带有空格或其他符号，用""将关键字包围
- 文件路径也可以作为内容输入端口

`wc [-c -m -l -w] 文件路径`：

- -c 统计bytes数量
- -m统计字符数量
- -l统计行数
- -w统计单词数量

- 参数：被统计的文件，可以作为内容输入端口



 管道符`|`：将左边命令的结果作为右边命令的输入。于是可以将左边结果当作上面两个可以作为输入端口的参数。

比如`ls -l /user/bin | grep gtf`, 输出`-rwxr-xr-x. 1 root root       19592  2月 27 00:37 gtf`

- 管道符可以嵌套



## echo、tail和重定向符

`echo 输出的内容` :在命令行输出指定的内容

在使用echo pwd时我们本意是要输出当前工作路径，但是pwd被当作文本输出

用``将pwd包围表示将pwd当作命令执行。



重定向符：

- `>` 表示将左侧命令的结果，覆盖写入符号右侧指定的文件中
- `>>`表示将左侧命令的结果，追加写入右侧指定文件 



`tail [-f -num] 路径`

- 参数：被查看的文件路径
- -f：表示持续跟踪。在命令不停止的情况下，对文件进行更改，tail输出的内容会同步更新。通过`ctrl+c`退出追踪
- -num：查看尾部多少行，不填默认十行。填写数字



## vi编辑器

visual interface 是linux中最经典的文本编辑器

vim是vi的加强版本，不仅能编辑文本，还能编辑shell程序、以不同颜色的字体来辨别语法的正确性



### 三种工作模式

- 命令模式：按键都被理解为命令。此模式下不能自由进行文本编辑
- 输入模式：就是编辑模式、插入模式。此模式下可以对文件内容进行自由编辑
- 底线命令模式：以`:`开头，通常用于文件的保存、退出

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 185118.png" alt="屏幕截图 2025-03-15 185118" style="zoom: 67%;" />

指正：上图的iao为i或a或o。并且用:wq保存退出。:w只保存不退出,  :q只退出



### 使用

`vi 文件路径`

`vim 文件路径`

使用如上命令能够使用vi/vim编辑器编辑文本。后续全部使用vim

- 如果文件表示的路径不存在，此命令会用于编辑新文件





### 命令模式快捷键

### <img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 190307.png" alt="屏幕截图 2025-03-15 190307" style="zoom:75%;" />



<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 190424.png" alt="屏幕截图 2025-03-15 190424" style="zoom:75%;" />

注：G是跳到最后一行行首



# 用户和权限

## root用户

在linux中，权限最大的账户为root（超级管理员）



`su [-] [用户名]`：

- `-`是可选的，表示是否在切换用户后加载环境变量，建议带上
- 省略用户名表示切换到root
- exit或`ctrl+d`退回上一个用户



`sudo 其他命令`

- 在其它命令之前，带上sudo，即可为这一条命令临时赋予root授权
- 经过sudo认证的普通用户才能使用sudo



配置sudo权限:

- 切换到root用户，执行visudo命令
- 在文件最后添加  `用户名 ALL=(ALL)       NOPASSWORD:ALL`

- 通过:wq保存



## 用户和用户组

Linux系统中可以：

- 配置多个用户
- 配置多个用户组
- 用户可以加入多个用户组

Linux中关于权限的管控级别有两个，分别是：

- 针对用户的权限控制
- 针对用户组的权限控制

比如，针对某文件，可以管控用户的权限，也可以控制用户组的权限



**以下命令需root执行**

- 创建用户组：`groupadd 组名`
- 删除：`groupdel 组名`



- `useradd [-g -d] 用户名`
  - -g指定用户的组，不指定会创建用户的同名组并自动加入。
  - -d指定用户的HOME路径，不指定，默认在/home/用户名
- `userdel [-r] 名`：-r表示删除HOME目录。不加-r在删除用户时HOME目录保存
- `id [用户名]`：查看用户所在组，不写用户名查看自己
- `usermod -aG 用户组 用户名`：将指定用户加入指定用户组



- `getent passwd`：查看当前系统中有哪些用户

- `getent group`：查看组



## 查看权限控制信息

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 200215.png" alt="屏幕截图 2025-03-15 200215" style="zoom:67%;" />

序号一的具体含义：

- 第一位：d表示文件夹，l表示软链接，-表示文件
- 2-4位：表示本用户对此文件的权限（r读、w写、x执行）
- 5-7位：表示本用户组其他用户对本文件的权限
- 8-10位：表示其他用户的权限
- <img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 200835.png" alt="屏幕截图 2025-03-15 200835" style="zoom:75%;" />



## 修改权限控制

### chmod

chmod命令修改文件、文件夹的权限信息

**只有文件所属用户及root可以修改**

`chmod [-R] 权限 文件或文件夹`：-R表示对文件夹内所有文件执行操作

示例:`chmod u=rwx,g=rx,o=x hello.txt`

简洁写法：`chomod 751 文件名`  。r为4，w为2，x为1



### chown

可以修改文件、文件夹所属用户和用户组。（只有root）



`chown [-R] [用户][:][用户组] 文件/文件夹`

- -R：同chmod规则

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 202326.png" alt="屏幕截图 2025-03-15 202326" style="zoom:75%;" />



# 实用操作

## 小技巧

`ctrl+c`：强制停止/输入错误直接终止输入跳到下一行

`ctrl+d`：退出当前账户的登录/退出某些特定程序的专属页面（不能用于vi/vim）

`history`：查看输入的历史命令

`!命令前缀`：执行上一次匹配前缀的命令

`ctrl+r`：输入内容去匹配历史命令

`ctrl+a`跳到命令开头

`ctrl+e`:跳到命令结尾

`ctrl+l`或clear  ：清空



## 安装

yum：RPM包软件管理器

`yum [-y] [install remove search] 软件名`

- -y：自动确认

yum命令需要联网、root权限



## 控制软件启动关闭

`systemctl [start stop status enable disable] 服务名`

status:查看状态

enable：开启开机自启

disable:关闭开机自启



## 软链接

软链接：将文件、文件夹链接到其他位置。（类似于win中的快捷方式，打开的是本体）

`ln -s 参数一 参数二`

- 参数1：被  (本体)
- 参数二：目的地



## 日期

`date [+格式化字符串]`



<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 205849.png" alt="屏幕截图 2025-03-15 205849" style="zoom: 67%;" />

 `date "+%Y-%m-%d %H:%M:%S"` 



## 主机名

`hostnamectl set-hostname 名`:设置主机名



DNS域名解析

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-15 211656.png" alt="屏幕截图 2025-03-15 211656" style="zoom: 80%;" />



## 网络请求和下载

`ping  [-c num] ip或主机名`: 检查指定的网络服务器是否可联通

- -c :检查的次数，不使用-c将无限次检查



`wget [-b] url` :在命令行内下载网络文件

- -b 后台下载



`curl [-O] url`：发送http网络请求，可用于下载文件、获取信息

- -O:用于下载文件，当url是下载链接时，可以使用此选项保存文件



## 进程



`ps [-e -f]`：查看进程信息

- -e :显示全部信息
- -f :以完全格式化的形式展示全部信息



`kill [-9] 进程ID`

- -9 :强制关闭



## 主机状态

### 系统资源监控

`top` :查看cpu、内存占用情况

![屏幕截图 2025-03-16 084532](C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-16 084532.png)



### 磁盘监控

`df [-h]` :硬盘使用情况

-h  :单位



`iostat [-x] num1 num2`

- -x:显示更多信息
- num1：刷新间隔
- num2：刷新几次



## 环境变量

$PATH :取出PATH环境变量的值

echo $PATH  :输出

- 临时设置：`export 变量名=变量值`
- 永久生效：
  - 针对当前用户：配置在~/bashirc文件中
  - 针对所有用户：配置在/etc/profile中，
  - 并通过`source 配置文件` 立刻生效



## 下载和上传

`rz`:从win上传文件

`sz 文件`：下载文件到win



## 压缩解压

Linux常用压缩格式：

- .tar

- .gz

这两种格式都可以用tar命令进行操作



`tar [-c -v -x -f -z -C] 参数1...参数n`

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-16 093004.png" alt="屏幕截图 2025-03-16 093004" style="zoom:75%;" />

<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-16 093229.png" alt="屏幕截图 2025-03-16 093229" style="zoom:75%;" />

注：

- -f必须在组合体的最后一位
- -z建议在开头
- -C单独使用



`zip [-r] 参数1..参数n`:

-r: 被压缩的包包含文件夹

`unzip [-d] 参数`

-d:指定要解压去的位置